<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game 4: Spelling Balloon Pop</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f8ff;
      margin: 0;
      padding: 0;
    }
    nav {
      background-color: #4CAF50;
      padding: 10px 20px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav h1 {
      margin: 0;
      font-size: 20px;
    }
    nav .nav-links a {
      color: white;
      text-decoration: none;
      margin-left: 20px;
      font-weight: bold;
    }
    nav .nav-links a:hover {
      text-decoration: underline;
    }
    .container {
      padding: 20px;
      max-width: 800px;
      margin: auto;
      text-align: center;
    }
    .balloon {
      width: 60px;
      height: 80px;
      border-radius: 50%;
      background-color: #ffcccb;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      color: black;
      position: absolute;
      cursor: pointer;
    }
    #game-area {
      position: relative;
      width: 100%;
      height: 400px;
      border: 2px solid #aaa;
      overflow: hidden;
      margin-top: 20px;
      background: #e0f7fa;
    }
    #word-display {
      font-size: 28px;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <nav>
    <h1>English Games</h1>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="login.html">Login</a>
    </div>
  </nav>
  <div class="container">
    <h2>Spelling Balloon Pop</h2>
    <p>Pop the balloons in the correct order to spell the word!</p>
    <div id="word-display"></div>
    <div id="game-area"></div>
    <p>Score: <span id="score">0</span></p>
  </div>

  <script>
    const words = ["apple", "banana", "grape", "mango", "chair", "spoon"];
    let currentWord = "";
    let currentIndex = 0;
    let score = 0;
    const gameArea = document.getElementById("game-area");
    const wordDisplay = document.getElementById("word-display");

    function startGame() {
      currentWord = words[Math.floor(Math.random() * words.length)];
      currentIndex = 0;
      wordDisplay.textContent = "_ ".repeat(currentWord.length).trim();
      gameArea.innerHTML = "";
      for (let i = 0; i < currentWord.length * 2; i++) {
        const letter = document.createElement("div");
        letter.className = "balloon";
        letter.style.left = Math.random() * (gameArea.clientWidth - 60) + "px";
        letter.style.top = Math.random() * (gameArea.clientHeight - 100) + "px";
        const isCorrect = Math.random() > 0.5 && currentIndex < currentWord.length;
        letter.textContent = isCorrect ? currentWord[currentIndex++] : randomLetter();
        letter.onclick = () => handlePop(letter);
        gameArea.appendChild(letter);
      }
      currentIndex = 0;
    }

    function handlePop(balloon) {
      if (balloon.textContent === currentWord[currentIndex]) {
        balloon.remove();
        currentIndex++;
        updateDisplay();
        if (currentIndex === currentWord.length) {
          score += 10;
          document.getElementById("score").textContent = score;
          setTimeout(startGame, 1000);
        }
      } else {
        score = Math.max(score - 5, 0);
        document.getElementById("score").textContent = score;
      }
    }

    function updateDisplay() {
      let display = "";
      for (let i = 0; i < currentWord.length; i++) {
        display += i < currentIndex ? currentWord[i] + " " : "_ ";
      }
      wordDisplay.textContent = display.trim();
    }

    function randomLetter() {
      const letters = "abcdefghijklmnopqrstuvwxyz";
      return letters[Math.floor(Math.random() * letters.length)];
    }

    window.onload = startGame;
  </script>
</body>
</html>
